<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>n0manarmy.github.io</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Summary</li><li class="chapter-item expanded "><a href="SUMMARY.html"><strong aria-hidden="true">1.</strong> Home</a></li><li class="chapter-item expanded "><a href="LOG4RS_RUNTIME_LOGGER.html"><strong aria-hidden="true">2.</strong> compiling log4rs runtime logger</a></li><li class="chapter-item expanded "><a href="CRYPTOPALS_RUST.html"><strong aria-hidden="true">3.</strong> Cryptopals Rust Implementaitons</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="SET1_CH1.html"><strong aria-hidden="true">3.1.</strong> Set 1 Challenge 1</a></li><li class="chapter-item expanded "><a href="SET1_CH2.html"><strong aria-hidden="true">3.2.</strong> Set 1 Challenge 2</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">n0manarmy.github.io</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#about" id="about">About</a></h1>
<p>Author: Penn Wilbert</p>
<p>A general collection of code snippets as I work through Rust in my daily life. My intent is to memorialize bits of code that I'll potentially use later in life.</p>
<h1><a class="header" href="#summary" id="summary">Summary</a></h1>
<ul>
<li><a href="./SUMMARY.html">Home</a></li>
<li><a href="./LOG4RS_RUNTIME_LOGGER.html">compiling log4rs runtime logger</a></li>
<li><a href="./CRYPTOPALS_RUST.html">Cryptopals Rust Implementaitons</a>
<ul>
<li><a href="./SET1_CH1.html">Set 1 Challenge 1</a></li>
<li><a href="./SET1_CH2.html">Set 1 Challenge 2</a></li>
</ul>
</li>
</ul>
<h1><a class="header" href="#log4rs-building-at-runtime" id="log4rs-building-at-runtime">log4rs building at runtime</a></h1>
<h2><a class="header" href="#code" id="code">Code</a></h2>
<h2><a class="header" href="#build_loggerrs" id="build_loggerrs">build_logger.rs</a></h2>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use log::{debug, error, info, warn, LevelFilter};
use log4rs::append::console::ConsoleAppender;
use log4rs::config::{Appender, Config, Logger, Root};
use log4rs::Handle;

use crate::args_helpers::argument_helper::LogLevel;

pub struct LogBuilder {}

impl LogBuilder {

    /// Builds our logger based on a programmatic implementation. This reduces the required
    /// config files needed to run the application.
    pub fn build_logger(log_level: &amp;LogLevel) -&gt; Handle {
        let stdout = ConsoleAppender::builder().build();
        let appender = Appender::builder().build(&quot;stdout&quot;, Box::new(stdout));
    
        let mut logger = Logger::builder().build(&quot;app::backend::db&quot;, LevelFilter::Info);
        let mut builder = Root::builder().appender(&quot;stdout&quot;).build(LevelFilter::Info);
    
        match log_level {
            LogLevel::Debug =&gt; {
                logger = Logger::builder().build(&quot;app::backend::db&quot;, LevelFilter::Debug);
                builder = Root::builder().appender(&quot;stdout&quot;).build(LevelFilter::Debug);
            }
            LogLevel::Info =&gt; (),
            LogLevel::Warn =&gt; {
                logger = Logger::builder().build(&quot;app::backend::db&quot;, LevelFilter::Warn);
                builder = Root::builder().appender(&quot;stdout&quot;).build(LevelFilter::Warn);
                
            }
            LogLevel::Error =&gt; {
                logger = Logger::builder().build(&quot;app::backend::db&quot;, LevelFilter::Error);
                builder = Root::builder().appender(&quot;stdout&quot;).build(LevelFilter::Error);
            }
        }
        let config = Config::builder().appender(appender).logger(logger).build(builder).unwrap();
    
        log4rs::init_config(config).unwrap()
    }
}
<span class="boring">}
</span></code></pre></pre>
<h2><a class="header" href="#args_helperrs" id="args_helperrs">args_helper.rs</a></h2>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Debug)]
pub enum LogLevel {
    Debug,
    Info,
    Warn,
    Error,
}

#[derive(Debug)]
pub struct ArgumentHelper {
    pub log_level: LogLevel,
}

impl ArgumentHelper {

        pub fn parse_args(mut self, args: Vec&lt;String&gt;) -&gt; ArgumentHelper {
        for _x in 0..args.len() {
            match args[_x].as_ref() {
                _ if args[_x] == Self::HELP_SWITCHES[0] =&gt; {
                    self.help = true;
                }
                _ if args[_x] == Self::HELP_SWITCHES[1] =&gt; {
                    self.help = true;
                }
                Self::LOG_LEVEL_SWITCH =&gt; {
                    self.log_level = Self::parse_log_level(&amp;args[_x + 1]);
                }
                &amp;_ =&gt; {}
            }
        }
        self
    }

    fn parse_log_level(val: &amp;str) -&gt; LogLevel {
        match val {
            &quot;debug&quot; =&gt; LogLevel::Debug,
            &quot;info&quot; =&gt; LogLevel::Info,
            &quot;warn&quot; =&gt; LogLevel::Warn,
            &quot;error&quot; =&gt; LogLevel::Error,
            _ =&gt; LogLevel::Info,
        }
    }
}
<span class="boring">}
</span></code></pre></pre>
<h2><a class="header" href="#mainrs" id="mainrs">main.rs</a></h2>
<pre><pre class="playground"><code class="language-rust">fn main() {
    // Collects arguments from system at runtime and parses to vector
    let args: Vec&lt;String&gt; = env::args().collect();

    // validate that values were provided, otherwise print help and exit
    if args.len() &lt;= 1 {
        debug!(&quot;No command line args, supplied, printing help&quot;);
        Help::print_help();
        exit(1);
    }

    // parse arguments from runtime into argument helper object
    let argument_helper: ArgumentHelper = ArgumentHelper::new().parse_args(args);
    if argument_helper.help {
        Help::print_help();
        exit(1);
    }
    LogBuilder::build_logger(&amp;argument_helper.log_level);
    info!(&quot;Logger started&quot;);

}
</code></pre></pre>
<h1><a class="header" href="#about-1" id="about-1">About</a></h1>
<p>Work has given us opertunties to explore and learn new things during the COVID19 crisis. I've been exploring the Rust programming language for a while and had decided to make it my primary language of choice. I've worked in Python, Java, shell scripting for other projects, each one helped me better appreciate Rust after I dedicated myself to learning the language.</p>
<p>I'm going to offer some advice, tips, and spoilers about the cryptopals challenges that I've worked through. I'm going to use this as a journal of sorts for my efforts. My original approach to these challenges was to start writing a bunch of helper functions for conversions. Set 1 Challenge 1 lead me down this path and I assumed it was the most appropriate for Cryptopals, and Rust. In a sense it was as was not.</p>
<ul>
<li><a href="./SET1_CH1.html">Set 1 Challenge 1</a></li>
<li><a href="./SET1_CH2.html">Set 1 Challenge 2</a></li>
</ul>
<h1><a class="header" href="#set-1-challenge-1" id="set-1-challenge-1">Set 1 Challenge 1</a></h1>
<p>Challenge 1 asks to take a hex encoded string and convert it to a base64 encoded string. I had written something similar a long time ago in C as a fun little challege. It was much easier in C because I just assumed bit shifting, where as in Rust, I knew there are crates to help. I did not want use crates so I started writing up helper functions for various different encoding/decoding.</p>
<pre><code>Chapter 1 Challenge 

Convert hex to base64
The string
49276d206b696c6c696e6720796f757220627261696e206c696b65206120706f69736f6e6f7573206d757368726f6f6

Should produce:
SSdtIGtpbGxpbmcgeW91ciBicmFpbiBsaWtlIGEgcG9pc29ub3VzIG11c2hyb29

So go ahead and make that happen. You'll need to use this code for the rest of the exercises

Cryptopals Rule
Always operate on raw bytes, never on encoded strings. Only use hex and base64 for pretty-printing.
</code></pre>
<p>Within the spoiler is the code I wrote to encode the hex string to base64</p>
<details>
    <summary>Spoiler</summary>
<pre><code>```rust
pub fn encode_hex_str(buf: &amp;'static str) -&gt; String {
    let mut buf_size = 0;
    let mut byte_buf: u32 = 0;
    let mut encoded: String = String::new();

    for c in buf.chars() {
        buf_size += 1;
        byte_buf |= c.to_digit(16).unwrap();

        if buf_size == 6 {
            let encoding = encode_match(byte_buf, buf_size/2);
            encoded.push_str(&amp;encoding);
            byte_buf = 0;
            buf_size = 0;
            continue
        }

        byte_buf &lt;&lt;= 4;
    }

    if buf_size != 0 {
        let encoding = encode_match(byte_buf, buf_size/2);
        encoded.push_str(&amp;encoding);
    }

    encoded
}
```
</code></pre>
</details><h1><a class="header" href="#set-1-challenge-2" id="set-1-challenge-2">Set 1 Challenge 2</a></h1>
<p>I approached this challenge with a little too much effort. I created functions to match and tear apart two Vectors of u8 and then xor their values. After working through the rest of the challenges and digging into rusts interator helpers, I realized there's a much more efficient way to handle this challenge.</p>
<p>I've posted my original source and functions and then I'll post the alternative code.</p>
<details>
    <summary>Code Spoiler</summary>
<pre><code>```rust
pub fn main() {
    println!(
        &quot;
        Chapter 1 Challenge 2
        
        Fixed XOR

        Write a function that takes two equal-length buffers and produces their XOR combination.

        If your function works properly, then when you feed it the string:

        1c0111001f010100061a024b53535009181c

        ... after hex decoding, and when XOR'd against:

        686974207468652062756c6c277320657965

        ... should produce:

        746865206b696420646f6e277420706c6179

        &quot;);
    let a_val = &quot;1c0111001f010100061a024b53535009181c&quot;;
    let b_val = &quot;686974207468652062756c6c277320657965&quot;;
    let a_bytes: Vec&lt;u32&gt; = a_val.chars().map(|x| x.to_digit(16).unwrap()).collect();
    let b_bytes: Vec&lt;u32&gt; = b_val.chars().map(|x| x.to_digit(16).unwrap()).collect();

    // let a_bytes: Vec&lt;u32&gt; = encoders::hex_str_to_hex_val(a_val);
    // let b_bytes: Vec&lt;u32&gt; = encoders::hex_str_to_hex_val(b_val);

    let result = xor::helpers::xor_same_size_buffers(a_bytes, b_bytes);
    let result_str: String = result.iter().map(|x| translators::to_hex(&amp;x)).collect();
    
    dbg!(assert_eq!(result_str, &quot;746865206b696420646f6e277420706c6179&quot;));
    assert_eq!(result_str, &quot;746865206b696420646f6e277420706c6179&quot;);
}

pub fn xor_same_size_buffers(buf1: Vec&lt;u32&gt;, buf2: Vec&lt;u32&gt;) -&gt; Vec&lt;u32&gt; {
    let mut xor_results: Vec&lt;u32&gt; = Vec::new();
    let mut pos = 0;
    if buf1.len() != buf2.len() {
        panic!(&quot;buffers are not equal length&quot;);
    };

    while pos &lt; buf1.len() {
        xor_results.push(buf1[pos] ^ buf2[pos]);
        pos += 1;
    }

    xor_results
}

pub fn to_hex(v: &amp;u32) -&gt; char {
    match v {
        0 =&gt; '0',
        1 =&gt; '1',
        2 =&gt; '2',
        3 =&gt; '3',
        4 =&gt; '4',
        5 =&gt; '5',
        6 =&gt; '6',
        7 =&gt; '7',
        8 =&gt; '8',
        9 =&gt; '9',
        10 =&gt; 'a',
        11 =&gt; 'b',
        12 =&gt; 'c',
        13 =&gt; 'd',
        14 =&gt; 'e',
        15 =&gt; 'f',
        _ =&gt; panic!(&quot;unknown value in to_hex conversion&quot;),
    }
}
```
</code></pre>
</details>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        
        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            var socket = new WebSocket("ws://localhost:3000/__livereload");
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>
        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
